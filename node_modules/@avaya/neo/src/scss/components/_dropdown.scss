@include neo-icon-context {
  &.neo-dropdown__link {
    &::before {
      font-size: $global-font-size;
      margin-bottom: $dropdown-icon-margin-y;
      margin-right: $dropdown-icon-margin-x;

      @include rtl-selector {
        margin: {
          left: $dropdown-icon-margin-x;
          right: initial;
        }
      }
    }
  }
}

@mixin neo-dropdown-arrow(
  $arrow-icon: "\25BE",
  $color: $dropdown-subcontent-arrow-color,
  $padding-left: $dropdown-padding-x
) {
  &::after {
    color: $color;
    content: $arrow-icon;
    padding: 0 0 0 $padding-left;

    @include rtl-selector {
      padding: {
        left: initial;
        right: $padding-left;
      }
    }
  }
}

@mixin neo-dropdown-item {
  $self: &;

  &__item {
    display: block;
    height: 100%;
    position: relative;
    width: 100%;

    > #{$self}__link {
      @include neo-dropdown-arrow($arrow-icon: "\25B8");
    }
  }
}

@mixin neo-dropdown-link {
  $self: &;

  & > &__link {
    border-radius: $dropdown-radius;
    display: inline-block;

    @include neo-dropdown-arrow;
  }

  &__link {
    background: $dropdown-content-background-color;
    color: $dropdown-item-color;
    cursor: pointer;
    display: block;
    font-size: $dropdown-font-size;
    line-height: $dropdown-line-height;
    padding: $dropdown-padding-y $dropdown-padding-x;
    text-decoration: none;
    white-space: nowrap;

    &:hover,
    #{$self}--active > & {
      background-color: $dropdown-item-hover-background-color;
      color: $dropdown-item-hover-color;
    }

    @include neo-icons;
  }
}

@mixin neo-dropdown-content {
  &__content &__content {
    left: 100%;
    top: -$dropdown-content-padding - $dropdown-content-border-width;

    @include rtl-selector {
      left: initial;
      right: 100%;
    }
  }

  @include neo-popover-content(
    $dropdown-animation-duration,
    $dropdown-content-background-color,
    $dropdown-content-border,
    $dropdown-radius,
    $dropdown-content-shadow,
    $dropdown-content-padding,
    $dropdown-content-z,
    $dropdown-min-width
  );
}

@mixin neo-dropdown-separator {
  & &__separator {
    border-bottom: $dropdown-divider-border;
    margin: 0;
    padding: 0;
  }
}

@mixin neo-dropdown-disabled {
  $self: &;

  &--disabled {
    cursor: not-allowed;
    opacity: 0.5;

    &:hover {
      background-color: transparent;
    }

    #{$self}__link {
      background-color: transparent;
    }
  }
}

@mixin neo-dropdown-avatar {
  .neo-avatar {
    margin: 0 $dropdown-avatar-sm-margin-x 0 0; /* Custom margin-right for avatar within dropdown items */

    @include rtl-selector {
      margin: {
        left: $dropdown-avatar-sm-margin-x;
        right: 0;
      }
    }
  }
}

@mixin neo-dropdown-position {
  &--right &__content {
    left: auto;
    right: 100%;
  }

  &--right > &__content {
    right: 0;

    @include rtl-selector {
      left: 0;
      right: auto;
    }
  }
}

@mixin neo-dropdown-input {
  .neo-input {
    background-color: $dropdown-input-bg;
    border: $dropdown-input-border;
    color: $dropdown-color;
    margin: $dropdown-input-offset;
    width: calc(100% - #{$dropdown-input-offset} * 2);

    &::placeholder {
      color: $dropdown-color;
    }
  }

  .neo-input-icon {
    margin: $dropdown-input-offset;

    .neo-input {
      margin: 0;
      width: 100%;
    }

    [class*="aoc-"],
    [class*="neo-icon"] {
      color: $dropdown-input-icon-color;
    }
  }
}

.neo-dropdown {
  box-sizing: border-box;
  display: inline-block;
  position: relative;

  @include neo-dropdown-item;
  @include neo-dropdown-link;
  @include neo-dropdown-content;
  @include neo-dropdown-separator;
  @include neo-dropdown-disabled;
  @include neo-dropdown-avatar;
  @include neo-dropdown-position;
  @include neo-dropdown-input;
  @include neo-popover-states;
}
